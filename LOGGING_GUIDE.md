# üìù –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Voice AI Assistant —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—ã–≤–æ–¥–æ–º –∏ —É–¥–æ–±–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è production
- **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è** –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ä–∞–∑–º–µ—Ä—É (20MB, 14 –¥–Ω–µ–π)
- **üìà 5 —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**: error, warn, info, http, debug
- **üéØ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ª–æ–≥–≥–µ—Ä—ã** –¥–ª—è —Å–µ—Å—Å–∏–π –∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
- **üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ–∫—Ä—ã—Ç–∏–µ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API** —á–µ—Ä–µ–∑ middleware
- **üõ†Ô∏è –£–¥–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
üìÅ app/lib/
‚îú‚îÄ‚îÄ üìÑ logger.ts                  # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (Winston)
‚îî‚îÄ‚îÄ üìÑ api-logger-middleware.ts   # Middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è API

üìÅ logs/                          # –ü–∞–ø–∫–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ üìã combined-YYYY-MM-DD.log    # –í—Å–µ –ª–æ–≥–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ ‚ùå error-YYYY-MM-DD.log       # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ (error + warn)
‚îú‚îÄ‚îÄ üåê http-YYYY-MM-DD.log        # HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ API
‚îú‚îÄ‚îÄ üéØ session-YYYY-MM-DD.log     # –õ–æ–≥–∏ —Å–µ—Å—Å–∏–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ üí• exceptions-YYYY-MM-DD.log  # –ù–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ üö´ rejections-YYYY-MM-DD.log  # –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–∏—Å—ã

üìÅ scripts/
‚îî‚îÄ‚îÄ üìÑ log-viewer.sh              # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)

### 1Ô∏è‚É£ –ß–µ—Ä–µ–∑ npm –∫–æ–º–∞–Ω–¥—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# === –ü–†–û–°–ú–û–¢–† –õ–û–ì–û–í ===
npm run logs:live      # üì° –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
npm run logs:errors    # ‚ùå –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
npm run logs:sessions  # üéØ –õ–æ–≥–∏ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
npm run logs:api       # üåê HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ API –≤—ã–∑–æ–≤—ã
npm run logs:stats     # üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è

# === –£–ü–†–ê–í–õ–ï–ù–ò–ï ===
npm run logs:clean     # üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
npm run logs           # üìñ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º
```

### 2Ô∏è‚É£ –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –Ω–∞–ø—Ä—è–º—É—é
```bash
# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
./scripts/log-viewer.sh live     # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
./scripts/log-viewer.sh errors   # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
./scripts/log-viewer.sh stats    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
./scripts/log-viewer.sh help     # –°–ø—Ä–∞–≤–∫–∞

# –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
./scripts/log-viewer.sh search "OpenAI"
./scripts/log-viewer.sh search "session" --lines 50
```

### 3Ô∏è‚É£ –ß–µ—Ä–µ–∑ –∞–ª–∏–∞—Å—ã (–ø–æ—Å–ª–µ `source aliases.sh`)
```bash
# –ö–æ—Ä–æ—Ç–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
logs-live              # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
logs-errors            # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
logs-sessions          # –õ–æ–≥–∏ —Å–µ—Å—Å–∏–π
logs-api               # HTTP –∑–∞–ø—Ä–æ—Å—ã
logs-stats             # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
logs-clean             # –û—á–∏—Å—Ç–∫–∞
```

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```typescript
import logger from '../lib/logger';

// === –ë–ê–ó–û–í–´–ï –£–†–û–í–ù–ò ===
logger.info('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ —Å–∏—Å—Ç–µ–º–µ');
logger.warn('–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤');
logger.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenAI API');
logger.debug('–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏');
logger.http('HTTP –∑–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω');

// === –° –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ú–ò –ú–ï–¢–ê–î–ê–ù–ù–´–ú–ò ===
logger.info('–°–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞', {
  sessionId: 'sess-123',
  userId: 'user-456',
  ip: '192.168.1.100',
  userAgent: 'Chrome/91.0',
  timestamp: Date.now()
});

logger.error('API –æ—à–∏–±–∫–∞', {
  error: error.message,
  stack: error.stack,
  endpoint: '/api/session',
  statusCode: 500,
  duration: 1500
});
```

### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è API
```typescript
// –í API —Ä–æ—É—Ç–∞—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç
export async function POST(request: Request) {
  // API –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ middleware
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  logger.info('–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏', {
    method: 'POST',
    endpoint: '/api/session',
    requestId: 'req-123',  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
  });
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π
```typescript
// –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ª–æ–≥–≥–µ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Å—Å–∏–π
logger.info('Session Event', {
  event: 'session_start',
  sessionId: sessionId,
  userCount: activeUsers,
  queueLength: waitingQueue.length,
  memoryUsage: process.memoryUsage().heapUsed
});
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
# –í—Å–µ –ª–æ–≥–∏
npm run logs:live

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
npm run logs:errors

# –õ–æ–≥–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ç–µ–∫—Å—Ç—É
tail -f logs/combined-$(date +%Y-%m-%d).log | grep "OpenAI"

# –õ–æ–≥–∏ —Å–µ—Å—Å–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
npm run logs:sessions
```

### –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
npm run logs:stats

# –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—à–∏–±–∫–∏
grep -n "500" logs/error-$(date +%Y-%m-%d).log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 –æ—à–∏–±–æ–∫
tail -50 logs/error-$(date +%Y-%m-%d).log
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ API –∑–∞–ø—Ä–æ—Å–æ–≤
grep "Request completed" logs/http-$(date +%Y-%m-%d).log | \
  jq -r '.duration' | \
  awk '{sum+=$1; count++} END {print "Avg:", sum/count "ms, Total:", count}'

# –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (>1000ms)
grep "Request completed" logs/http-$(date +%Y-%m-%d).log | \
  jq 'select(.duration | tonumber > 1000)'
```

### –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –∑–∞ –¥–µ–Ω—å
grep "session_start" logs/session-$(date +%Y-%m-%d).log | wc -l

# –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
grep "Request completed" logs/http-$(date +%Y-%m-%d).log | \
  jq -r '.url' | sort | uniq -c | sort -nr
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Ä–æ–≤–Ω–µ–π (app/lib/logger.ts)
```typescript
const config = {
  level: process.env.LOG_LEVEL || 'info',  // debug, info, warn, error
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.json()
  ),
  transports: [
    // –ö–æ–Ω—Å–æ–ª—å (—Ç–æ–ª—å–∫–æ –≤ development)
    new winston.transports.Console({
      format: winston.format.simple()
    }),
    
    // –§–∞–π–ª—ã —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
    new winston.transports.DailyRotateFile({
      filename: 'logs/combined-%DATE%.log',
      maxSize: '20m',
      maxFiles: '14d'
    })
  ]
};
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
# –í .env.local
LOG_LEVEL=info          # debug, info, warn, error
NODE_ENV=production     # –í–ª–∏—è–µ—Ç –Ω–∞ —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
```

## üö® Troubleshooting –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### ‚ùå –õ–æ–≥–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la logs/
chmod 755 logs/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
df -h /

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run docker:restart
```

#### ‚ùå –õ–æ–≥–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ
```bash
# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
npm run logs:clean

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä
du -sh logs/

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–æ—Ç–∞—Ü–∏—é (server-setup/monitor_logs.sh)
sudo /root/monitor_logs.sh
```

#### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
grep LOG_LEVEL .env.local

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
echo "LOG_LEVEL=error" >> .env.local
npm run docker:restart
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ª–æ–≥–≥–µ—Ä–∞
curl http://localhost:3000/api/session?action=stats
tail -1 logs/http-$(date +%Y-%m-%d).log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ª–æ–≥–æ–≤
head -5 logs/combined-$(date +%Y-%m-%d).log | jq '.'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏
ls -la logs/ | head -10
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ cron –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
echo "*/10 * * * * tail -100 ~/voice-ai-assistant/logs/error-\$(date +\%Y-\%m-\%d).log | grep -q 'CRITICAL' && echo 'Critical error detected' | mail admin@domain.com" | crontab -

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤ (—É–∂–µ –µ—Å—Ç—å –≤ server-setup/monitor_logs.sh)
echo "0 9 * * * /root/monitor_logs.sh >> /root/monitor.log 2>&1" | crontab -
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –≤ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, Elasticsearch)
tail -f logs/combined-$(date +%Y-%m-%d).log | \
  while read line; do
    curl -X POST "http://elasticsearch:9200/voice-assistant-logs/_doc" \
         -H "Content-Type: application/json" \
         -d "$line"
  done
```

### –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
#!/bin/bash
ERROR_COUNT=$(grep -c "CRITICAL\|FATAL" logs/error-$(date +%Y-%m-%d).log)
if [ "$ERROR_COUNT" -gt 5 ]; then
  echo "High error rate detected: $ERROR_COUNT critical errors today" | \
    mail -s "Voice AI Assistant Alert" admin@domain.com
fi
```

## üßπ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–º –Ω–∞ –¥–∏—Å–∫–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
```bash
# –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è (14 –¥–Ω–µ–π, 20MB —Ñ–∞–π–ª—ã)
# –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ logger.ts

# –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
find logs/ -name "*.log" -mtime +30 -delete

# –û—á–∏—Å—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (—Å–æ—Ö—Ä–∞–Ω—è—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 —Å—Ç—Ä–æ–∫)
find logs/ -name "*.log" -size +50M -exec sh -c 'tail -1000 "$1" > "$1.tmp" && mv "$1.tmp" "$1"' _ {} \;
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞
```bash
# –†–∞–∑–º–µ—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤
du -sh logs/

# –¢–æ–ø-5 —Å–∞–º—ã—Ö –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
du -h logs/*.log | sort -hr | head -5

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
watch -n 5 'du -sh logs/ && df -h /'
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### jq –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ JSON –ª–æ–≥–æ–≤
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ jq (–µ—Å–ª–∏ –Ω–µ—Ç)
sudo apt install jq

# –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤
cat logs/combined-$(date +%Y-%m-%d).log | jq '.'

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é
cat logs/combined-$(date +%Y-%m-%d).log | jq 'select(.level == "error")'

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º
cat logs/combined-$(date +%Y-%m-%d).log | jq -r '.level' | sort | uniq -c
```

### –°–æ–∑–¥–∞–Ω–∏–µ custom –∞–ª–∏–∞—Å–æ–≤
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ ~/.bashrc –∏–ª–∏ ~/.zshrc
alias logs-today='tail -100 ~/voice-ai-assistant/logs/combined-$(date +%Y-%m-%d).log'
alias logs-errors-count='grep -c "error\|warn" ~/voice-ai-assistant/logs/error-$(date +%Y-%m-%d).log'
alias logs-api-stats='grep "Request completed" ~/voice-ai-assistant/logs/http-$(date +%Y-%m-%d).log | jq -r ".status" | sort | uniq -c'
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **[server-setup/monitor_logs.sh](./server-setup/monitor_logs.sh)** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ä–æ—Ç–∞—Ü–∏—è
- **[scripts/log-viewer.sh](./scripts/log-viewer.sh)** - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤
- **[DOCKER_GUIDE.md](./DOCKER_GUIDE.md)** - –õ–æ–≥–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **[SECURITY_GUIDE.md](./SECURITY_GUIDE.md)** - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É–¥–∏—Ç –ª–æ–≥–æ–≤

---

**üéØ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –¥–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!** 