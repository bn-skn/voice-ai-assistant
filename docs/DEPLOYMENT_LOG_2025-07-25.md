# üìö **–ò–°–¢–û–†–ò–ß–ï–°–ö–ò–ô –ñ–£–†–ù–ê–õ –î–ï–ü–õ–û–Ø Voice AI Assistant**
## üéØ –†–µ–∞–ª—å–Ω—ã–π –ª–æ–≥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ

**‚ö†Ô∏è –í–ê–ñ–ù–û**: –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π –æ–ø—ã—Ç –¥–µ–ø–ª–æ—è –∏ —Å–ª—É–∂–∏—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π —Å–ø—Ä–∞–≤–∫–æ–π.  
–î–ª—è –Ω–æ–≤–æ–≥–æ –¥–µ–ø–ª–æ—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **[DEPLOYMENT_FINAL_CHECKLIST.md](../DEPLOYMENT_FINAL_CHECKLIST.md)**

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä voice-ai-server-bnskn (25.07.2025)

### **üìä –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –°–ï–†–í–ï–†–ï:**
- **Hostname**: voice-ai-server-bnskn
- **RAM**: 961Mi (~1GB) ‚ö†Ô∏è –ú–ê–õ–û (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2GB+)
- **–î–∏—Å–∫**: 24GB (18GB —Å–≤–æ–±–æ–¥–Ω–æ) ‚úÖ –•–û–†–û–®–û
- **CPU**: 1 —è–¥—Ä–æ Intel ‚úÖ –î–û–°–¢–ê–¢–û–ß–ù–û
- **OS**: Ubuntu (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ)

---

## **üìã –ü–†–û–ì–†–ï–°–° –î–ï–ü–õ–û–Ø:**

### **–≠–¢–ê–ü 0: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** üîç
- [‚úÖ] **0.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞**
  - RAM: ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (961Mi –≤–º–µ—Å—Ç–æ 2GB+)
  - –î–∏—Å–∫: ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (18GB —Å–≤–æ–±–æ–¥–Ω–æ)
  - CPU: ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (1 —è–¥—Ä–æ)
- [‚úÖ] **0.2 –û—á–∏—Å—Ç–∫–∞ Docker** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (1.9GB –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ!)
  - [‚úÖ] –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
  - [‚úÖ] –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
  - [‚úÖ] –û—á–∏—Å—Ç–∫–∞ –æ–±—Ä–∞–∑–æ–≤ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
  - [‚úÖ] –û—á–∏—Å—Ç–∫–∞ volume ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (0B)
  - [‚úÖ] –û—á–∏—Å—Ç–∫–∞ —Å–µ—Ç–µ–π ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
  - [‚úÖ] –û–±—â–∞—è –æ—á–∏—Å—Ç–∫–∞ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (1.9GB!)
- [‚úÖ] **0.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–≤—Å–µ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã!)
- [üîÑ] **0.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS** myvoiceai.ru ‚Üí 146.190.172.111 (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ A-–∑–∞–ø–∏—Å–µ–π)
- [‚úÖ] **0.5 –ü—Ä–æ–≤–µ—Ä–∫–∞ OpenAI API –∫–ª—é—á–∞** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ (gpt-4o-realtime –¥–æ—Å—Ç—É–ø–µ–Ω!)

### **–≠–¢–ê–ü 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞** üõ°Ô∏è
- [ ] **1.1 SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** ‚úÖ (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
- [‚úÖ] **1.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (Docker 28.3.2!)
- [‚úÖ] **1.3 –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è deployer** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (SSH –Ω–∞—Å—Ç—Ä–æ–µ–Ω!)
- [‚úÖ] **1.4 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (80,443,SSH —Ä–∞–∑—Ä–µ—à–µ–Ω—ã)
- [‚úÖ] **1.5 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–≤—Å–µ —É–∂–µ –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!)
- [‚úÖ] **1.6 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker** ‚úÖ –£–ñ–ï –£–°–¢–ê–ù–û–í–õ–ï–ù (28.3.2!)
- [‚úÖ] **1.7 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ Docker –¥–ª—è deployer** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (Docker 28.3.2 —Ä–∞–±–æ—Ç–∞–µ—Ç!)

### **–≠–¢–ê–ü 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞** ‚öôÔ∏è
- [‚úÖ] **2.1 –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è voice-ai-assistant** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (163 –æ–±—ä–µ–∫—Ç–∞!)
- [‚úÖ] **2.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env.local —Å API –∫–ª—é—á–æ–º** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (+ ADMIN_TOKEN!)
- [‚úÖ] **2.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### **–≠–¢–ê–ü 3: –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** üê≥
- [‚úÖ] **3.1 –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ª–æ–≥–æ–≤** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [‚úÖ] **3.2 –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (225s, —É—Å–ø–µ—à–Ω–æ!)
- [‚úÖ] **3.3 –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω!)
- [‚úÖ] **3.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ health check** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (API —Ä–∞–±–æ—Ç–∞–µ—Ç, HTTP 200!)
- [‚úÖ] **3.5 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (0 –æ—à–∏–±–æ–∫!)

### **–≠–¢–ê–ü 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –∏ SSL** üåê
- [‚úÖ] **4.1 –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ–¥ root –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ Nginx** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (DNS —Ä–∞–±–æ—Ç–∞–µ—Ç!)
- [‚úÖ] **4.2 –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è myvoiceai.ru** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–¥–æ–º–µ–Ω –∑–∞–º–µ–Ω–µ–Ω!)
- [‚úÖ] **4.3 –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞!)
- [‚úÖ] **4.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (HTTP 200, —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!)
- [‚úÖ] **4.5 –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (SSL –¥–æ 23.10.2025!)
- [‚úÖ] **4.6 –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –û–ö!)

### **–≠–¢–ê–ü 5: –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** üìà
- [üîÑ] **5.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
- [ ] **5.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
- [ ] **5.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–∏–∞—Å–æ–≤**
- [ ] **5.4 –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL**
- [ ] **5.5 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤**

### **–≠–¢–ê–ü 6: Backup –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** üîí
- [ ] **6.1 –°–∫—Ä–∏–ø—Ç backup**
- [ ] **6.2 –ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞**

---

## **üìù –ó–ê–ú–ï–¢–ö–ò –ò –ü–†–û–ë–õ–ï–ú–´:**

### **‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø:**
1. **RAM –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ** (961Mi –≤–º–µ—Å—Ç–æ 2GB+) - –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
2. **–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–µ–ø–ª–æ—è** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞ Docker ‚úÖ –†–ï–®–ï–ù–û
3. **Nginx –∑–∞–ø—É—â–µ–Ω** - –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç 80, —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

### **üîß –†–ï–®–ï–ù–ò–Ø:**
1. –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å —Ç–µ–∫—É—â–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏, –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–æ–±–ª–µ–º–∞–º
2. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–≤–µ–ª–∏—á–∏–º —Å–µ—Ä–≤–µ—Ä
3. –¢—â–∞—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ Docker –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

### **üìä –ö–û–ú–ê–ù–î–´ –í –ü–†–û–¶–ï–°–°–ï:**
```bash
# ‚úÖ DOCKER –û–ß–ò–©–ï–ù: 1.9GB –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ!
# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: docker stop $(docker ps -aq) 2>/dev/null || true
# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: docker rm $(docker ps -aq) 2>/dev/null || true
# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: docker rmi $(docker images -q) 2>/dev/null || true
# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: docker volume prune -f (0B –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ)
# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: docker network prune -f
# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: docker system prune -a -f (1.9GB –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ!)

# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: sudo systemctl stop nginx
# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: ss -tlnp | grep -E ':80|:443|:3000' (–ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç = –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã!)

# üåê –î–û–ú–ï–ù: myvoiceai.ru –ö–£–ü–õ–ï–ù!
# üîß –ù–ê–°–¢–†–û–ô–ö–ê DNS –Ω–∞ reg.ru:
# A-–∑–∞–ø–∏—Å—å: @ ‚Üí 146.190.172.111
# A-–∑–∞–ø–∏—Å—å: www ‚Üí 146.190.172.111
# 
# ‚è∞ DNS –µ—â–µ –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª—Å—è (NXDOMAIN - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!)
# üîÑ –¢–µ–∫—É—â–∞—è –∫–æ–º–∞–Ω–¥–∞ (–ø—Ä–æ–±—É–µ–º Google DNS):
nslookup myvoiceai.ru 8.8.8.8
# 
# ‚úÖ –ì–û–¢–û–í–û! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:

üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê:** HTTP 500 –Ω–∞ `/api/session`

## ‚ùå 5.2 –ü–†–û–ë–õ–ï–ú–ê –û–ë–ù–ê–†–£–ñ–ï–ù–ê:
- üåê **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** –†–∞–±–æ—Ç–∞–µ—Ç (HTTP 200)
- üì± **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- ‚ùå **API /api/session:** HTTP 500 (Internal Server Error)
- üé§ **–ì–æ–ª–æ—Å–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:** –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ API –æ—à–∏–±–∫–∏

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –ö–û–ú–ê–ù–î–´:
```bash
# 1. –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run logs:errors

# 2. –õ–æ–≥–∏ Nginx  
sudo tail -20 /var/log/nginx/error.log

# 3. –ü—Ä—è–º–æ–π —Ç–µ—Å—Ç API
curl -v http://localhost:3000/api/session?action=stats

# 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
cat /etc/nginx/sites-available/myvoiceai.ru
```

## üéØ –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê: 
**‚ùå POST /api/session** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 500
**‚úÖ GET /api/session?action=stats** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ó–∞–º–µ–Ω–∞ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –∏–∑ nginx.example.conf
sudo cp ~/voice-ai-assistant/nginx.example.conf /etc/nginx/sites-available/myvoiceai.ru.new
sudo sed -i 's/your_domain.com/myvoiceai.ru/g' /etc/nginx/sites-available/myvoiceai.ru.new
sudo nginx -t -c /etc/nginx/sites-available/myvoiceai.ru.new
sudo mv /etc/nginx/sites-available/myvoiceai.ru.new /etc/nginx/sites-available/myvoiceai.ru  
sudo nginx -t && sudo systemctl reload nginx
```

## üîÑ NGINX –ü–ï–†–ï–ó–ê–ì–†–£–ñ–ï–ù! –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### üìã –ö–û–ú–ê–ù–î–´ –ü–†–û–í–ï–†–ö–ò:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx
sudo nginx -t && sudo systemctl status nginx

# –¢–µ—Å—Ç POST API —á–µ—Ä–µ–∑ HTTPS  
curl -X POST https://myvoiceai.ru/api/session -H "Content-Type: application/json" -d '{"action":"create"}' -v

# –¢–µ—Å—Ç GET API
curl -s https://myvoiceai.ru/api/session?action=stats | jq .
```

### üé§ –¢–ï–°–¢ –í –ë–†–ê–£–ó–ï–†–ï:
1. –û–±–Ω–æ–≤–∏—Ç—å https://myvoiceai.ru (Ctrl+F5)
2. –ù–∞–∂–∞—Ç—å "–ù–∞—á–∞—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä" 
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

## ‚ùå HTTP 500 –û–®–ò–ë–ö–ê –û–°–¢–ê–ï–¢–°–Ø!

### üîç –ü–†–û–ë–õ–ï–ú–ê –ù–ï –í NGINX - –î–ò–ê–ì–ù–û–°–¢–ò–†–£–ï–ú –ü–†–ò–õ–û–ñ–ï–ù–ò–ï:

```bash
# 1. –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
cd ~/voice-ai-assistant && npm run logs:live

# 2. –¢–µ—Å—Ç POST –Ω–∞–ø—Ä—è–º—É—é –∫ Docker (–≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
curl -X POST http://localhost:3000/api/session -H "Content-Type: application/json" -d '{"action":"connect"}' -v

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec voice-ai-assistant-container env | grep OPENAI

# 4. –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
npm run docker:status

# 5. –ü–æ–ª–Ω—ã–µ –ª–æ–≥–∏ Docker
docker logs voice-ai-assistant-container --tail 50
```

## üéØ –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê! 

### ‚ùå –û–®–ò–ë–ö–ê: 
```json
{"error":"OPENAI_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è"}
```

### üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ .env.local
cat ~/voice-ai-assistant/.env.local

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  
cd ~/voice-ai-assistant
npm run docker:stop
npm run docker:start

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec voice-ai-assistant-container env | grep OPENAI_API_KEY

# 4. –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
npm run docker:status
```

## ‚úÖ .env.local –§–ê–ô–õ –ö–û–†–†–ï–ö–¢–ï–ù!

### üîß –ü–ï–†–ï–ó–ê–ü–£–°–ö–ê–ï–ú –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –ó–ê–ì–†–£–ó–ö–ò API –ö–õ–Æ–ß–ê:
```bash
# –ü–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º deployer
su - deployer
cd ~/voice-ai-assistant

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
npm run docker:stop
npm run docker:start

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
docker exec voice-ai-assistant-container env | grep OPENAI_API_KEY

# –¢–µ—Å—Ç POST –∑–∞–ø—Ä–æ—Å–∞
curl -X POST http://localhost:3000/api/session -H "Content-Type: application/json" -d '{"action":"connect"}' -v
```

## üßπ –û–ß–ò–°–¢–ö–ê DOCKER –†–ï–°–£–†–°–û–í (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

### üîß –ö–û–ú–ê–ù–î–´ –û–ß–ò–°–¢–ö–ò:
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker system df

# –û—á–∏—Å—Ç–∫–∞ (–ø–æ –ø–æ—Ä—è–¥–∫—É)
docker image prune -f          # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
docker builder prune -f        # Build cache
docker container prune -f      # –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã  
docker network prune -f        # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ç–∏
docker volume prune -f         # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes
docker system prune -f         # –û–±—â–∞—è –æ—á–∏—Å—Ç–∫–∞

# –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
docker system df
docker images
docker ps -a
```

## ‚úÖ –û–ß–ò–°–¢–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê! –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ 1.5GB

### üîç –ü–†–û–í–ï–†–Ø–ï–ú API –ö–õ–Æ–ß –ü–û–°–õ–ï –ü–ï–†–ï–ó–ê–ü–£–°–ö–ê:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec voice-ai-assistant-container env | grep OPENAI_API_KEY

# 2. –¢–µ—Å—Ç POST –∑–∞–ø—Ä–æ—Å–∞ (–µ—Å–ª–∏ –∫–ª—é—á –µ—Å—Ç—å)
curl -X POST http://localhost:3000/api/session -H "Content-Type: application/json" -d '{"action":"connect"}' -v

# 3. –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
npm run docker:status
```

‚ö†Ô∏è **–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï:** –í—Å–µ –µ—â–µ –≤–∏–¥–∏–º `WARN: OPENAI_API_KEY variable is not set`

## ‚ùå API –ö–õ–Æ–ß –ù–ï –ó–ê–ì–†–£–ñ–ê–ï–¢–°–Ø! 

### üîç –ü–†–û–ë–õ–ï–ú–ê:
```bash
OPENAI_API_KEY=  # –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ!
```

### üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ .env.local –≤ .env:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
npm run docker:stop

# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (Docker Compose —á–∏—Ç–∞–µ—Ç .env –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
mv .env.local .env

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
cat .env

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
npm run docker:start

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
docker exec voice-ai-assistant-container env | grep OPENAI_API_KEY

# –¢–µ—Å—Ç POST –∑–∞–ø—Ä–æ—Å–∞
curl -X POST http://localhost:3000/api/session -H "Content-Type: application/json" -d '{"action":"connect"}' -v
```

## üîç –ù–ê–ô–î–ï–ù–ê –ü–†–ò–ß–ò–ù–ê! –°–∫—Ä–∏–ø—Ç –∏—â–µ—Ç –∏–º–µ–Ω–Ω–æ .env.local

### üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
```bash
# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ (—Å–∫—Ä–∏–ø—Ç —Ç—Ä–µ–±—É–µ—Ç .env.local)
mv .env .env.local

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
npm run docker:start

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
docker exec voice-ai-assistant-container env | grep OPENAI_API_KEY
```

üí° **–ü–†–û–ë–õ–ï–ú–ê:** –°–∫—Ä–∏–ø—Ç `docker-ops.sh` –∂–µ—Å—Ç–∫–æ –∏—â–µ—Ç —Ñ–∞–π–ª `.env.local`, –Ω–µ `.env`

## üéØ –ù–ê–ô–î–ï–ù–ê –ü–†–ò–ß–ò–ù–ê! –ü—Ä–æ–±–ª–µ–º–∞ –≤ docker-compose.yml

### üîç –ü–†–û–ë–õ–ï–ú–ê:
```yaml
env_file: .env.local          # –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª
environment:                  # –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç–∞
  - OPENAI_API_KEY=${OPENAI_API_KEY}  # –ù–æ —Ö–æ—Å—Ç –Ω–µ –∑–Ω–∞–µ—Ç —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é!
```

### üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - –°–∏–º–ª–∏–Ω–∫ .env:
```bash
# –°–æ–∑–¥–∞–µ–º —Å–∏–º–ª–∏–Ω–∫ (Docker Compose —á–∏—Ç–∞–µ—Ç .env –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
ln -sf .env.local .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
npm run docker:stop
npm run docker:start

# –ü—Ä–æ–≤–µ—Ä–∫–∞
docker exec voice-ai-assistant-container env | grep OPENAI_API_KEY
```

## üîß –°–û–ó–î–ê–ï–ú –°–ò–ú–õ–ò–ù–ö –ò –¢–ï–°–¢–ò–†–£–ï–ú:

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–ª–∏–Ω–∫–∞
ln -sf .env.local .env

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º–ª–∏–Ω–∫–∞
ls -la | grep -E "\\.env"

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
npm run docker:stop
npm run docker:start

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
docker exec voice-ai-assistant-container env | grep OPENAI_API_KEY

# 5. –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç POST API
curl -X POST http://localhost:3000/api/session -H "Content-Type: application/json" -d '{"action":"connect"}' -v
```

## üéâ –£–°–ü–ï–•! API –ö–õ–Æ–ß –ó–ê–ì–†–£–ñ–ï–ù!

### ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´:
- üîó **–°–∏–º–ª–∏–Ω–∫ —Å–æ–∑–¥–∞–Ω:** `.env -> .env.local`  
- üîë **API –∫–ª—é—á –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:** `OPENAI_API_KEY=sk-proj-MJJf...`
- üö´ **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏—Å—á–µ–∑–ª–∏:** –ë–æ–ª—å—à–µ –Ω–µ—Ç WARN —Å–æ–æ–±—â–µ–Ω–∏–π

### üîß –§–ò–ù–ê–õ–¨–ù–´–ô –¢–ï–°–¢:
```bash
# –¢–µ—Å—Ç–∏—Ä—É–µ–º POST API
curl -X POST http://localhost:3000/api/session -H "Content-Type: application/json" -d '{"action":"connect"}' -v

# –¢–µ—Å—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ: https://myvoiceai.ru
```

## üéâ –ù–ï–í–ï–†–û–Ø–¢–ù–´–ô –£–°–ü–ï–•! HTTP 200 OK!

### ‚úÖ API –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢:
- üü¢ **HTTP 200 OK** - –û—à–∏–±–∫–∞ 500 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!
- üéØ **Session ID:** `sess_BxDxskMsMjp2KmhDgX4Qj`
- ü§ñ **–ú–æ–¥–µ–ª—å:** `gpt-4o-realtime-preview-2024-12-17`
- ‚è±Ô∏è **–õ–∏–º–∏—Ç:** 5 –º–∏–Ω—É—Ç —Å–µ—Å—Å–∏–∏
- üõ°Ô∏è **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** –∑–∞–≥—Ä—É–∂–µ–Ω—ã

### üé§ –§–ò–ù–ê–õ–¨–ù–´–ô –¢–ï–°–¢ –í –ë–†–ê–£–ó–ï–†–ï:
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://myvoiceai.ru
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5)  
3. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä"
4. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
5. –ì–æ–≤–æ—Ä–∏—Ç–µ —Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º!

## üòÑ –¢–ï–°–¢–û–í–ê–Ø –°–ï–°–°–ò–Ø –ê–ö–¢–ò–í–ù–ê! –û—Å—Ç–∞–Ω–æ–≤–∏–º –µ—ë

### üîç –í–ò–î–ò–ú –ù–ê –°–ö–†–ò–ù–®–û–¢–ï:
- üé§ **"–û–∂–∏–¥–∞–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥–∏..."** - —Å–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞
- üìä **"–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞–Ω—è—Ç"** - –æ—á–µ—Ä–µ–¥—å: 1  
- ‚ùå **HTTP 429** "Too Many Requests" –≤ –∫–æ–Ω—Å–æ–ª–∏

### üîß –û–°–¢–ê–ù–û–í–ò–ú –°–ï–°–°–ò–Æ:
```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π
curl -X POST http://localhost:3000/api/session \
  -H "Content-Type: application/json" \
  -d '{"action":"forceEndAll","adminToken":"4b8a700ee226040fd45930b1330f2bb2a6bd3260d7ca8c2f241e2453fe49e7dc"}' \
  -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
curl -s http://localhost:3000/api/session?action=stats | jq .
```

## ‚úÖ –°–ï–°–°–ò–ò –û–ß–ò–©–ï–ù–´ –ü–ï–†–ï–ó–ê–ü–£–°–ö–û–ú!

### üîÑ –†–ï–ó–£–õ–¨–¢–ê–¢–´:
- ‚ùå **Admin API:** HTTP 429 (–æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞)
- üîÑ **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ
- üßπ **–û—á–∏—Å—Ç–∫–∞:** –í—Å–µ —Å–µ—Å—Å–∏–∏ —Å–±—Ä–æ—à–µ–Ω—ã

### üîç –ü–†–û–í–ï–†–ö–ê –û–ß–ò–°–¢–ö–ò:
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å –Ω—É–ª–∏
curl -s http://localhost:3000/api/session?action=stats | jq .
```

### üé§ –§–ò–ù–ê–õ–¨–ù–´–ô –¢–ï–°–¢ –í –ë–†–ê–£–ó–ï–†–ï:
1. –û–±–Ω–æ–≤–∏—Ç—å https://myvoiceai.ru (Ctrl+F5)
2. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å "–û—Ç–∫–ª—é—á–µ–Ω"
3. –ù–∞–∂–∞—Ç—å "–ù–∞—á–∞—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
5. –°–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É

## üéâ –ù–ï–í–ï–†–û–Ø–¢–ù–û! –ì–û–õ–û–°–û–í–û–ô –ê–°–°–ò–°–¢–ï–ù–¢ –†–ê–ë–û–¢–ê–ï–¢!

### ‚úÖ –≠–¢–ê–ü 5.2 –ó–ê–í–ï–†–®–ï–ù –£–°–ü–ï–®–ù–û:
- üé§ **–ú–∏–∫—Ä–æ—Ñ–æ–Ω:** –†–∞–±–æ—Ç–∞–µ—Ç –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≥–æ–ª–æ—Å
- ü§ñ **–ò–ò –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:** –û—Ç–≤–µ—á–∞–µ—Ç –≥–æ–ª–æ—Å–æ–º —á–µ—Ä–µ–∑ OpenAI Realtime API
- üåê **HTTPS:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π SSL
- üîß **API:** HTTP 500 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω ‚Üí HTTP 200
- üê≥ **Docker:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

### üìã –ü–ï–†–ï–•–û–î–ò–ú –ö –û–°–¢–ê–í–®–ò–ú–°–Ø –≠–¢–ê–ü–ê–ú:
- [‚úÖ] **5.1** –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- [‚úÖ] **5.2** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–ì–û–õ–û–° –†–ê–ë–û–¢–ê–ï–¢!)  
- [ ] **5.3** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–∏–∞—Å–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] **5.4** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL
- [ ] **5.5** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- [ ] **6.1** –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ backup
- [ ] **6.2** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ (fail2ban)

## üîß –≠–¢–ê–ü 5.3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ê–ª–∏–∞—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

### üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (–≤—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–±):

**–°–ü–û–°–û–ë 1 - –ê–ª–∏–∞—Å –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –ø—Ä–æ–µ–∫—Ç:**
```bash
echo 'alias va="cd ~/voice-ai-assistant"' >> ~/.bashrc
source ~/.bashrc

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: va ‚Üí logs-errors
```

**–°–ü–û–°–û–ë 2 - –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –≤ –∞–ª–∏–∞—Å–∞—Ö:**
```bash
sed -i 's|./scripts/|~/voice-ai-assistant/scripts/|g' ~/voice-ai-assistant/aliases.sh
source ~/.bashrc

# –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∏–∑ –ª—é–±–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
```

### ‚ùå –ù–û–í–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –°–∫—Ä–∏–ø—Ç –∏—â–µ—Ç logs –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–£–¢–ï–ô –í –°–ö–†–ò–ü–¢–ê–•:
```bash
# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—É—Ç–∏ –≤ log-viewer.sh
sed -i 's|logs/|~/voice-ai-assistant/logs/|g' ~/voice-ai-assistant/scripts/log-viewer.sh
source ~/.bashrc

# –¢–µ—Å—Ç–∏—Ä—É–µ–º
logs-errors
logs-help
```

### üöÄ –ò–õ–ò –ü–†–û–°–¢–´–ï –ê–õ–ò–ê–°–´:
```bash
cat >> ~/.bashrc << 'EOF'

# –ü—Ä–æ—Å—Ç—ã–µ –∞–ª–∏–∞—Å—ã –¥–ª—è Voice AI Assistant  
alias va-logs-errors='cd ~/voice-ai-assistant && npm run logs:errors'
alias va-logs-live='cd ~/voice-ai-assistant && npm run logs:live'
alias va-docker-status='cd ~/voice-ai-assistant && npm run docker:status'
alias va-cd='cd ~/voice-ai-assistant'
EOF

source ~/.bashrc
```

## ‚úÖ –≠–¢–ê–ü 5.3 –ó–ê–í–ï–†–®–ï–ù! –ê–ª–∏–∞—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç!

### üìã –ü–†–û–ì–†–ï–°–° –î–ï–ü–õ–û–Ø:
- [‚úÖ] **5.1** –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- [‚úÖ] **5.2** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–ì–û–õ–û–° –†–ê–ë–û–¢–ê–ï–¢!)  
- [‚úÖ] **5.3** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–∏–∞—Å–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ì–û–¢–û–í–û!)
- [ ] **5.4** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL
- [ ] **5.5** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞  
- [ ] **6.1** –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ backup
- [ ] **6.2** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ (fail2ban)

## üîß –≠–¢–ê–ü 5.4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL

```bash
# –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç–∞—Ç—É—Å Certbot timer
sudo systemctl status certbot.timer

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (dry run)
sudo certbot renew --dry-run

# –ï—Å–ª–∏ –≤—Å–µ –û–ö - –≥–æ—Ç–æ–≤–æ! Timer —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω
```

## ‚úÖ –≠–¢–ê–ü 5.4 –ó–ê–í–ï–†–®–ï–ù! SSL –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

### üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò:
- üü¢ **Timer:** `active (waiting)` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚è∞ **–°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫:** –ó–∞–≤—Ç—Ä–∞ –≤ 00:18 UTC  
- ‚úÖ **Dry run:** –í—Å–µ —Å–∏–º—É–ª—è—Ü–∏–∏ —É—Å–ø–µ—à–Ω—ã
- üîÑ **–ß–∞—Å—Ç–æ—Ç–∞:** 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å (–æ—á–µ–Ω—å –Ω–∞–¥–µ–∂–Ω–æ!)

### üìã –ü–†–û–ì–†–ï–°–° –î–ï–ü–õ–û–Ø:
- [‚úÖ] **5.1** –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- [‚úÖ] **5.2** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–ì–û–õ–û–° –†–ê–ë–û–¢–ê–ï–¢!)  
- [‚úÖ] **5.3** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–∏–∞—Å–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [‚úÖ] **5.4** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL (–ì–û–¢–û–í–û!)
- [ ] **5.5** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞  
- [ ] **6.1** –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ backup
- [ ] **6.2** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ (fail2ban)

## üîß –≠–¢–ê–ü 5.5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

```bash
# –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
cat > ~/monitor_logs.sh << 'EOF'
#!/bin/bash
LOG_SIZE=$(du -sh ~/voice-ai-assistant/logs | cut -f1)
DISK_USAGE=$(df -h / | awk 'NR==2 {print $5}' | sed 's/%//')

echo "$(date): Logs size: $LOG_SIZE, Disk usage: $DISK_USAGE%"

if [ $DISK_USAGE -gt 80 ]; then
  echo "WARNING: Disk usage above 80%!"
fi
EOF

chmod +x ~/monitor_logs.sh

# –î–æ–±–∞–≤–ª—è–µ–º –≤ crontab –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
(crontab -l 2>/dev/null; echo "0 9 * * * ~/monitor_logs.sh >> ~/monitor.log") | crontab -
```

### üí≠ –í–û–ü–†–û–° –û –ß–ê–°–¢–û–¢–ï CERTBOT

**‚úÖ 2 –†–ê–ó–ê –í –î–ï–ù–¨ - –û–ü–¢–ò–ú–ê–õ–¨–ù–û!**
- üß† **Certbot —É–º–Ω—ã–π:** –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ < 30 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- ‚è∞ **–†–µ–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** ~1 —Ä–∞–∑ –≤ 2 –º–µ—Å—è—Ü–∞  
- üîÑ **–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** 1-2 —Å–µ–∫—É–Ω–¥—ã (–æ—á–µ–Ω—å –ª–µ–≥–∫–∞—è)
- üõ°Ô∏è **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –ï—Å–ª–∏ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Ç–æ—Ä–æ–π

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç Let's Encrypt!**

## üîß –í–´–ü–û–õ–ù–Ø–ï–ú –≠–¢–ê–ü 5.5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### üìä –ö–û–ú–ê–ù–î–´ –î–õ–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø:
```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
cat > ~/monitor_logs.sh << 'EOF'
#!/bin/bash
LOG_SIZE=$(du -sh ~/voice-ai-assistant/logs | cut -f1)  
DISK_USAGE=$(df -h / | awk 'NR==2 {print $5}' | sed 's/%//')

echo "$(date): Logs size: $LOG_SIZE, Disk usage: $DISK_USAGE%"

if [ $DISK_USAGE -gt 80 ]; then
  echo "WARNING: Disk usage above 80%!"
fi
EOF

# 2. –ü—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x ~/monitor_logs.sh

# 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
~/monitor_logs.sh

# 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ crontab (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 9:00)
(crontab -l 2>/dev/null; echo "0 9 * * * ~/monitor_logs.sh >> ~/monitor.log") | crontab -

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ crontab
crontab -l
```

## üí° –£–õ–£–ß–®–ï–ù–ù–´–ô –°–ö–†–ò–ü–¢: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤!

### üßπ –£–ú–ù–´–ô –°–ö–†–ò–ü–¢ –° –ê–í–¢–û–û–ß–ò–°–¢–ö–û–ô:
```bash
cat > ~/monitor_logs.sh << 'EOF'
#!/bin/bash

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
PROJECT_DIR="~/voice-ai-assistant"
LOGS_DIR="$PROJECT_DIR/logs"
MAX_LOG_SIZE_MB=100  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤ MB
DAYS_TO_KEEP=7       # –°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ —Ä–∞–∑–º–µ—Ä—ã
LOG_SIZE=$(du -sm $LOGS_DIR 2>/dev/null | cut -f1)
DISK_USAGE=$(df -h / | awk 'NR==2 {print $5}' | sed 's/%//')

echo "$(date): Logs size: ${LOG_SIZE}MB, Disk usage: $DISK_USAGE%"

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
if [ "$LOG_SIZE" -gt "$MAX_LOG_SIZE_MB" ]; then
  echo "Logs exceed ${MAX_LOG_SIZE_MB}MB, cleaning old files..."
  
  # –£–¥–∞–ª—è–µ–º –ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
  find $LOGS_DIR -name "*.log" -mtime +$DAYS_TO_KEEP -delete
  
  # –û–±—Ä–µ–∑–∞–µ–º –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –¥–æ 1000 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç—Ä–æ–∫
  find $LOGS_DIR -name "*.log" -size +10M -exec sh -c 'tail -1000 "$1" > "$1.tmp" && mv "$1.tmp" "$1"' _ {} \;
  
  NEW_SIZE=$(du -sm $LOGS_DIR 2>/dev/null | cut -f1)
  echo "Cleaned logs: ${LOG_SIZE}MB ‚Üí ${NEW_SIZE}MB"
fi

# –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ (85%)
if [ $DISK_USAGE -gt 85 ]; then
  echo "CRITICAL: Disk usage above 85%!"
fi
EOF

chmod +x ~/monitor_logs.sh
~/monitor_logs.sh

# –û–±–Ω–æ–≤–ª—è–µ–º crontab
crontab -l | grep -v "monitor_logs.sh" | crontab -
(crontab -l 2>/dev/null; echo "0 9 * * * ~/monitor_logs.sh >> ~/monitor.log") | crontab -
crontab -l
```

### üéØ –ß–¢–û –î–ï–õ–ê–ï–¢ –£–õ–£–ß–®–ï–ù–ù–´–ô –°–ö–†–ò–ü–¢:
- üóëÔ∏è **–£–¥–∞–ª—è–µ—Ç –ª–æ–≥–∏** —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
- ‚úÇÔ∏è **–û–±—Ä–µ–∑–∞–µ—Ç –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã** –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 1000 —Å—Ç—Ä–æ–∫  
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Ä–∞–∑–º–µ—Ä—ã** –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—á–∏—Å—Ç–∫–∏
- ‚ö†Ô∏è **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç** —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ (85%)

### ‚úÖ **–°–ö–†–ò–ü–¢ –†–û–¢–ê–¶–ò–ò –õ–û–ì–û–í –°–û–ó–î–ê–ù –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù!**

**üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**
```bash
Fri Jul 25 15:51:35 UTC 2025: Logs size: 1MB, Disk usage: 23%
```

**üéØ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–°–¢–ï–ú–ê:**
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 
- üßπ **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞**: –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ 100MB
- üóëÔ∏è **–†–æ—Ç–∞—Ü–∏—è**: –£–¥–∞–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
- ‚úÇÔ∏è **–û–±—Ä–µ–∑–∫–∞**: –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 —Å—Ç—Ä–æ–∫
- ‚ö†Ô∏è **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è**: –¢–æ–ª—å–∫–æ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ (>85%)

**üìã –ì–û–¢–û–í–û –ö –ü–ï–†–ï–•–û–î–£ –ö –°–õ–ï–î–£–Æ–©–ï–ú–£ –≠–¢–ê–ü–£**

---

## üéØ **–≠–¢–ê–ü 6: BACKUP –ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨**

### ‚úÖ **6.1. –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –ë–≠–ö–ê–ü–ê –°–û–ó–î–ê–ù–ê**

**üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**
```bash
‚úÖ Backup created: config_backup_20250725_155323.tar.gz
-rw-r--r-- 1 root root 2.6K Jul 25 15:53 /root/backups/config_backup_20250725_155323.tar.gz
```

**üì¶ –°–û–î–ï–†–ñ–ò–ú–û–ï –ë–≠–ö–ê–ü–ê:**
- üîß `etc/nginx/sites-available/myvoiceai.ru`
- üîë `home/deployer/voice-ai-assistant/.env.local` 
- üê≥ `home/deployer/voice-ai-assistant/docker-compose.yml`

**üóÇÔ∏è –ü–û–õ–ò–¢–ò–ö–ê –ë–≠–ö–ê–ü–û–í:**
- üïò **–†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ**: `~/backup_config.sh`
- üóëÔ∏è **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞**: –£–¥–∞–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π

### ‚úÖ **6.2. FAIL2BAN –£–°–¢–ê–ù–û–í–õ–ï–ù –ò –†–ê–ë–û–¢–ê–ï–¢**

**üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –£–°–¢–ê–ù–û–í–ö–ò:**
```bash
‚óè fail2ban.service - Fail2Ban Service
     Active: active (running) since Fri 2025-07-25 15:54:28 UTC
Status
|- Number of jail:      1
`- Jail list:   sshd
```

**üîí –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ó–ê–©–ò–¢–´:**
- üö® **SSH –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ê–∫—Ç–∏–≤–µ–Ω
- üî¢ **–ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫**: 3 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –≤—Ö–æ–¥–∞
- ‚è∞ **–í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**: 1 —á–∞—Å (3600 —Å–µ–∫)
- üìä **–°—Ç–∞—Ç—É—Å**: 1 –Ω–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞, 0 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö IP

**üõ°Ô∏è –°–ï–†–í–ï–† –ó–ê–©–ò–©–ï–ù –û–¢ BRUTE-FORCE –ê–¢–ê–ö**

---

## üéØ **–≠–¢–ê–ü 7: –§–ò–ù–ê–õ–¨–ù–´–ï –ü–†–û–í–ï–†–ö–ò**

### üìã **CHECKLIST –§–ò–ù–ê–õ–¨–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**

```bash
# 7.1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
echo "üîç –ü–†–û–í–ï–†–ö–ê –í–°–ï–• –°–ï–†–í–ò–°–û–í:"
systemctl status nginx fail2ban docker

# 7.2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø
echo -e "\nüåê –ü–†–û–í–ï–†–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø:"
curl -I https://myvoiceai.ru
curl -s https://myvoiceai.ru | grep -q "–ò–ò –ì–æ–ª–æ—Å–æ–≤–æ–π –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç" && echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç" || echo "‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"

# 7.3. –ü—Ä–æ–≤–µ—Ä—è–µ–º API
echo -e "\nüîå –ü–†–û–í–ï–†–ö–ê API:"
curl -s https://myvoiceai.ru/api/session?action=stats

# 7.4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ—Å—É—Ä—Å—ã
echo -e "\nüíæ –ü–†–û–í–ï–†–ö–ê –†–ï–°–£–†–°–û–í:"
df -h /
free -h
docker stats --no-stream

# 7.5. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
echo -e "\nüìä –ü–û–°–õ–ï–î–ù–ò–ï –õ–û–ì–ò:"
cd /home/deployer/voice-ai-assistant
sudo -u deployer npm run logs:errors
```

### ‚úÖ **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –§–ò–ù–ê–õ–¨–ù–´–• –ü–†–û–í–ï–†–û–ö:**

**üîç –°–ï–†–í–ò–°–´:**
- ‚úÖ **Nginx**: `active (running)` - —Ä–∞–±–æ—Ç–∞–µ—Ç 4—á 5–º–∏–Ω
- ‚úÖ **Fail2ban**: `active (running)` - —Ä–∞–±–æ—Ç–∞–µ—Ç 2—á 7–º–∏–Ω  
- ‚úÖ **Docker**: `active (running)` - —Ä–∞–±–æ—Ç–∞–µ—Ç 5—á 12–º–∏–Ω

**üåê –ü–†–ò–õ–û–ñ–ï–ù–ò–ï:**
- ‚úÖ **HTTPS**: `HTTP/1.1 200 OK` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ **–ö–æ–Ω—Ç–µ–Ω—Ç**: "–ò–ò –ì–æ–ª–æ—Å–æ–≤–æ–π –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç" –Ω–∞–π–¥–µ–Ω - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **SSL**: HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

**üîå API:**
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: `{"activeSessions":0,"queueLength":0,"cooldownUsers":0}`
- ‚úÖ **–û—Ç–≤–µ—Ç**: API –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**üíæ –†–ï–°–£–†–°–´:**
- ‚úÖ **–î–∏—Å–∫**: 23% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ (5.2G –∏–∑ 24G)
- ‚úÖ **RAM**: 500Mi –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∏–∑ 961Mi  
- ‚úÖ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**: 59.95MiB –∏–∑ 512MiB (11.71%)

**üìä –õ–û–ì–ò:**
- ‚ö†Ô∏è **HTTP 500**: –°—Ç–∞—Ä—ã–µ –æ—à–∏–±–∫–∏ –∏–∑ –ø–µ—Ä–∏–æ–¥–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (14:12-14:37)
- ‚ö†Ô∏è **HTTP 429**: –õ–∏–º–∏—Ç—ã —Å–µ—Å—Å–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (14:46-14:47)
- ‚úÖ **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ù–æ–≤—ã—Ö –æ—à–∏–±–æ–∫ –Ω–µ—Ç

---

## üéâ **–î–ï–ü–õ–û–ô –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù!**

### üöÄ **–í–ê–® –ò–ò –ì–û–õ–û–°–û–í–û–ô –ê–°–°–ò–°–¢–ï–ù–¢ –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï:**
- üåç **URL**: https://myvoiceai.ru
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: SSL, Fail2ban, CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –õ–æ–≥–∏, –±—ç–∫–∞–ø—ã, —Ä–æ—Ç–∞—Ü–∏—è
- üõ°Ô∏è **–ó–∞—â–∏—Ç–∞**: –õ–∏–º–∏—Ç—ã —Å–µ—Å—Å–∏–π, –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä

**üéØ –ü–†–û–ï–ö–¢ –£–°–ü–ï–®–ù–û –†–ê–ó–í–ï–†–ù–£–¢ –í PRODUCTION!** üöÄ
```

---

**üéØ –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°:** –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≠—Ç–∞–ø 5.1)
**‚è∞ –ù–ê–ß–ê–õ–û –î–ï–ü–õ–û–Ø:** $(date)
**üë§ –î–ï–ü–õ–û–ï–†:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å + AI Assistant 